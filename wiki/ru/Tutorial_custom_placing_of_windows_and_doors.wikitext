<languages/>
{{TutorialInfo/ru
|Topic=Архитектура
|Level=Средний
|Time=60 минут
|Author=[https://forum.freecadweb.org/memberlist.php?mode=viewprofile&u=21943 vocx]
|FCVersion=0.18 или выше
|Files=нет
}}

<span id="Introduction"></span>
==Введение==

Этот учебник покажет как поместить спроектированное пользователем [[Arch Window/ru|окна]] и [[Arch Door/ru|двери]] в модели здания. Он использует верстаки [[Draft Workbench/ru|Draft]], [[Arch Workbench/ru|Arch]], и [[Sketcher Workbench/ru|Sketcher]].

<div class="mw-translate-fuzzy">
Используются следующие инструменты: [[Draft_Snap_Grid/ru|Draft Grid]], [[Draft Snap/ru|Draft Snap]], [[Draft Wire/ru|Draft Wire]], [[Arch Wall/ru|Arch Wall]], [[Arch Window/ru|Arch Window]], и [[Sketcher NewSketch/ru|Sketcher NewSketch]]. Пользователь должен быть знаком с установкой ограничений в эскизах.
</div>

Этот учебник был вдохновлён учебниками, написанными jpg87 на [https://forum.freecadweb.org/viewforum.php?f=36 форумах FreeCAD].
* [https://forum.freecadweb.org/viewtopic.php?f=36&t=32883 Arch Create a custom window]
* [https://forum.freecadweb.org/viewtopic.php?f=36&t=32982 Arch : How to use your custom Window]

Посмотрите, пожалуйста, следующую ветку для дополнительной информации о позиционировании окон и дверей.
* [https://forum.freecadweb.org/viewtopic.php?t=35368 Discussion: Orientation of Windows and Doors]

Посмотрите так же следующую страницу ради некоторых видео о том, как выравнять окна.
* [http://help-freecad-jpg87.fr/04_arch_ind.php The workbench used to create architectural projects is called Arch]

<span id="Setup"></span>
== Установка ==

1. Откройте FreeCAD, создайте новый пустой документ, и переключитесь на [[Arch Workbench/ru|Верстак Arch]].

2. Убедитесь, что единицы измерения установлены в меню {{MenuCommand|Правка → Настройки → Основные → Единицы измерения}} правильно. Например, {{incode|МКС (м/кг/с/градус)}} хороши для работы с расстояниями в типичных строениях; и установите число знаков после запятой на  {{incode|4}}, чтобы учитывать малейшие доли метра.

3. Используйте кнопку [[Draft ToggleGrid/ru|Показывать сетку]] для показа сетки с достаточным разрешением. Вы можете изменить вид сетки в меню {{MenuCommand|Правка → Настройки → Draft → Сетка и привязка → Сетка}}. Установите линии через каждые {{incode|50 mm}}, с главными линиями каждые {{incode|20}} линий (каждый метр), и {{incode|1000 линий}} всего (сетка покрывает площадь 50 x 50 метров).

4. [[Zoom out/ru|Отодвиньте]] трёхмерный вид, если сетка слишком близка.

Теперь мы готовы сделать простейшую стену, где мы установим окна и двери.

<span id="Placing_a_wall"></span>
== Установка стены ==


<div class="mw-translate-fuzzy">
5. Используйте инструмент [[Draft Wire/ru|Draft Wire]] для создания полилинии. Ведите её против часовой стрелки.
:5.1. Первая точка в (0, 4, 0); в диалоге введите {{KEY|0}} {{KEY|m}} {{KEY|Enter}}, {{KEY|4}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}.
:5.2. Вторая точка в (2, 0, 0); в диалоге введите {{KEY|2}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}.
:5.3. Третья точка в (4, 0, 0); в диалоге введите {{KEY|4}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}.
:5.4. Четвёртая точка в (6, 2, 0); в диалоге введите {{KEY|6}} {{KEY|m}} {{KEY|Enter}}, {{KEY|2}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}.
:5.4. Пятая точка в (6, 5, 0); в диалоге введите {{KEY|6}} {{KEY|m}} {{KEY|Enter}}, {{KEY|5}} {{KEY|m}} {{KEY|Enter}}, {{KEY|0}} {{KEY|m}} {{KEY|Enter}}.
:5.5. На клавиатуре нажмите {{KEY|A}} для завершения полилинии.
:5.6. На клавиатуре нажмите {{KEY|0}} для получения [[axonometric view/ru|аксонометрического вида]] модели.
:{{Emphasis|Примечание:}} убедитесь, что чекбокс {{Emphasis|Относительно (R)}} не отмечен, когда вводите абсолютные координаты.
:{{Emphasis|Примечание 2:}} точки могут быть определены указателем мыши по точкам сетки, с помощью панели [[Draft Snap/ru|Draft Snap]] и метода [[Draft_Snap_Grid/ru|Draft Grid]].
:{{Emphasis|Примечание 3:}} вы можете создать формы программированием на [[Python/ru|Python]]. Учтите, что большинство функций ожидают ввод в миллиметрах.
</div>

{{Code|code=
import FreeCAD
import Draft

p = [FreeCAD.Vector(0.0, 4000.0, 0),
FreeCAD.Vector(2000.0, 0.0, 0.0),
FreeCAD.Vector(4000.0, 0.0, 0.0),
FreeCAD.Vector(6000.0, 2000.0, 0.0),
FreeCAD.Vector(6000.0, 5000.0, 0.0)]

w = Draft.makeWire(p, closed=False)
}}

6. Выделите {{incode|DWire}} и кликните инструмент [[Arch Wall/ru|Arch Wall]]; появится стена с шириной (толщиной) по умолчанию 0,2 м и высотой 3 м.

[[Image:01_T02_wire_wall.png|600px|center]]

{{Caption|align=center|Базовая линия для стены}}
[[Image:02_T02_just_wall.png|600px|center]]

{{Caption|align=center|Стена, полученная из полилинии}}

<span id="Placing_preset_doors_and_windows"></span>
== Установка стандартных дверей и окон ==

<div class="mw-translate-fuzzy">
7. Кликните инструмент [[Arch Window/ru|Arch Window]]; в ниспадающем списке Preset выделите {{incode|Simple door}}, и установите высоту в 2 м.
:7.1. Установите привязку на [[Draft_Snap_Midpoint/ru|Draft Midpoint]], и попробуйте выделить нижнюю грань передней стены; поверните [[standard view/ru|standard view]] как требуется, чтобы зацепить грань, а не поверхность стены; когда активна средняя точка, кликните для установки двери.
:7.2. Кликните снова инструмент [[Arch Window/ru|Arch Window]], и установите другую дверь, на сей раз в средней точке крайней правой стены; поворачивайте [[standard view/ru|standard view]] по необходимости.
</div>

[[Image:03_T02_wall_place_doors.png|600px|center]]

{{Caption|align=center|Захват по средней точке нижней грани стены для установки двери}}

<div class="mw-translate-fuzzy">
:{{Emphasis|Примечание:}} {{incode|Sill height}} это дистанция от пола до нижнего края элемента. Для дверей {{incode|Sill height}} обычно 0 m, поскольку двери обычно на уровне пола; с другой стороны, окна обычно отделяет от пола от 0.5 до 1.5 m. {{incode|Sill height}} может быть установлен только при создании окна или двери из заготовки. Когда окно или двери вставлены, корректируйте их размещение редактированием вектора {{PropertyData|Position}}  {{incode|[x, y, z]}} базового эскиза ([[Sketcher_Workbench/ru|Sketch]]).
</div>

<span id="Creating_custom_doors_and_windows"></span>
== Создание пользовательских дверей и окон ==

8. Переключитесь на [[Sketcher Workbench/ru|верстак Sketcher]]; выделите часть стены справа, где нет двери; кликните на [[Sketcher NewSketch/ru|Новый эскиз]]; выделите {{Button|FlatFace}} как метод прикрепления. Если существующая геометрия заслоняет ваш вид, кликните [[Sketcher ViewSection/ru|Обзор эскиза]] чтобы спрятать её.

9. Нарисуйте милый эскиз с тремя замкнутыми полилиниями. Убедитесь в наличии ограничений для всех полилиний.
:9.1. Внешняя полилиния - наибольшая, определяет главный размер оконного объекта и размер выреза в стене при внедрении окна в [[Arch Wall/ru|Arch Wall]]. Убедитесь, что размеры подходяще названы, например {{incode|Width}} и {{incode|Height}}. Ограничения так же определяют curvature of the outer wire; дайте им подходящее имя, вроде {{incode|HeightCurve}}.
:9.2. Следующая полилиния это смещение от внешней полилинии, и вместе с ней определяет ширину замоноличиваемой в стену оконной коробки. Назовите смещение соответствующе, например, {{incode|FrameFixedOffset}}. Он будет использован как для вертикального, так и горизонтального смещения. Нижнее смещение, при установке в ноль приведёт к касанию оконной коробкой низа окна, это можно использовать для моделирования двери вместо окна. Дайте ей подходящее имя, вроде {{incode|FrameFixedBottom}}.
:9.3. Третья, внутренняя полилиния это смещение от второй полилинии и вместе с ней определяет подвижную раму окна. Внутренняя полилиния так же определяет размер стекла. Ещё раз, дайте этим смещениям говорящие имена, например, {{incode|FrameInnerOffset}} и {{incode|FrameInnerBottom}}.
:9.4. Чтобы успешно построить эскиз, используйте горизонтальные ([[Sketcher ConstrainHorizontal/ru|Sketcher ConstrainHorizontal]]) вертикальные ([[Sketcher ConstrainVertical/ru|Sketcher ConstrainVertical]]) ограничения для непосредственных сторон; используйте дополнительную конструктивную геометрию ([[Sketcher ToggleConstruction/ru|Sketcher ToggleConstruction]]) и тангенциальные ограничения ([[Sketcher ConstrainTangent/ru|Sketcher ConstrainTangent]]) для корректного размещения дуг наверху. Поскольку сейчас окно симметрично, не забывайте, когда нужно, ограничения равенства ([[Sketcher ConstrainEqual/ru|Sketcher ConstrainEqual]]), симметрии ([[Sketcher ConstrainSymmetric/ru|Sketcher ConstrainSymmetric]]) и точки на объекте ([[Sketcher ConstrainPointOnObject/ru|Sketcher ConstrainPointOnObject]]).

[[Image:04_T02_window_constraints_outer_frame.png|center]]

{{Caption|align=center|Ограничения для внешних полилиний эскиза, формирующих окно}}
[[Image:05_T02_window_constraints_inner_frame.png|center]]

{{Caption|align=center|Ограничения для внутренних полилиний эскиза, формирующих окно}}

10. Когда эскиз полностью зафиксирован, нажмите {{Button|Close}} для выхода из эскиза ([[Sketcher LeaveSketch/ru|Sketcher LeaveSketch]]).
:10.1. Поскольку лицевая поверхность стены выбирается при начальных шагах создания эскиза, эскиз параллелен с ней, однако он может быть в неверной позиции, вне стены. В этом случае подстройте {{PropertyData|Position}} внутри {{PropertyData|Attachment Offset}}. Установите  {{PropertyData|Position}} в {{incode|[4 m, 1 m, 0 m]}}, так что эскиз будет центрирован по стене в одном метре от пола.
:10.2. Вы можете видеть именованные ограничения эскиза в {{PropertyData|Constraints}}. Значения могут меняться с немедленным визуальным контролем изменений эскиза.

[[Image:07_T02_window_sketch_in_wall.png|600px|center]]

{{Caption|align=center|Эскиз окна движется к желательной позиции на стене}}

[[Image:06_T02_window_sketch_properties_constraints.png|600px|center]]

{{Caption|align=center|Именованные ограничения эскиза, которые могут меняться без углубления в эскиз}}

11. Переключитесь обратно на [[Arch Workbench/ru|верстак Arch]] и примените [[Arch Window]] к выбранному новому {{incode|Sketch002}}. Будет создано окно, и отверстие под него в стене. Окно сделано из пользовательского эскиза, а не стандартной заготовки, так что ему требуется редактирование для корректного отображения его компонентов, то есть неподвижной рамы, внутренней рамы, и стекла.

[[Image:08_T02_window_basic_in_wall.png|600px|center]]

{{Caption|align=center|Пользовательское окно, созданное из эскиза, у него пока нет правильной рамы или стекла}}

<span id="Setting_up_the_custom_window"></span>
== Настройка пользовательского окна ==

12. В древе проекта под {{incode|Window}} выделите {{incode|Sketch002}}, и нажмите {{KEY|Space}}, или измените свойство {{PropertyView|Visibility}} на {{TRUE}}.

13. Дважды кликните на {{incode|Window}} в древе проекта для начала его редактирования.
:13.1. Внутри диалога {{incode|Window elements}} имеется две панели, {{incode|Wires}} и {{incode|Components}}. Там будет три полилинии, {{incode|Wire0}}, {{incode|Wire1}} и {{incode|Wire2}}, и один компонент, {{incode|Default}}. Полилинии указывают на замкнутые кривые, нарисованные на эскизе; компоненты определяют области на эскизе, которые будут выдавлены для создания рамы или стеклянной панели с реальной толщиной, эти области разделяются полилиниями. Окно, созданное из заготовки, уже имеет два компонента, {{incode|OuterFrame}} и {{incode|Glass}}. Пользовательское окно нужно редактировать для получения такой структуры.

[[Image:09_T02_window_edit_default.png|center]]

{{Caption|align=center|Диалог редактирования окна или двери}}

:13.2. Кликните на {{incode|Default}}, потом на кнопке {{Button|Remove}} чтобы убрать его.

:13.3. Кликните {{Button|Add}}; что покажет параметры нового компонента вроде {{incode|Name}}, {{incode|Type}}, {{incode|Wires}}, {{incode|Thickness}}, {{incode|Offset}}, {{incode|Hinge}}, и {{incode|Opening mode}}. Дайте имя, вроде {{incode|OuterFrame}}, выделите {{incode|Frame}} для типа {{incode|Type}}, и кликните на {{incode|Wire0}} и {{incode|Wire1}}; они будут подсвечены в окне трёхмерного вида. Добавьте небольшое значение для {{incode|Thickness}}, {{incode|15 mm}}, и отметьте чекбокс для установки значения по умолчанию. Это значение по умолчанию будет длинной, назначенной параметру {{PropertyData|Frame}}; подобное умолчание может быть назначено для параметра {{PropertyData|Offset}}. Кликните на кнопке {{Button|+Create/update component}}для завершения редактирования компонента.

:13.4. Кликните {{Button|Add}}; дайте другое имя, вроде {{incode|InnerFrame}}, укажите {{incode|Frame}} для {{incode|Type}} и кликните на {{incode|Wire1}} и {{incode|Wire2}}. Добавьте подходящего размера {{incode|Thickness}}, {{incode|60 mm}}, и {{incode|Offset}}, {{incode|15 mm}}. Затем кликните кнопку {{Button|+Create/update component}}.

:13.5. Кликните {{Button|Add}}; дайте другое имя, вроде {{incode|Glass}}, выберите {{incode|Glass panel}} для {{incode|Type}}, и кликните {{incode|Wire2}}. Добавьте подходящего размера {{incode|Thickness}}, {{incode|10 mm}} и {{incode|Offset}}, {{incode|40 mm}}. Затем кликните кнопку {{Button|+Create/update component}}. Если любой из трёх компонентов нуждается в модификации, выделите его и нажмите {{Button|Edit}}; модификация сохранится только после нажатия кнопки {{Button|+Create/update component}}.

[[Image:10_T02_window_edit_components.png|center]]

{{Caption|align=center|Редактирование ранее определённого компонента окна или двери}}

:13.6. Если всё установлено, кликните {{Button|Close}} для завершения редактирования окна. Эскиз вновь станет не виден, но окно покажет различимые элементы для {{incode|OuterFrame}}, для {{incode|InnerFrame}}, и {{incode|Glass}}. Задайте для {{PropertyData|Frame}} значение {{incode|100 mm}} для толщины по умолчанию, которое будет добавлено к значению, определённому в компоненте {{incode|OuterFrame}}.

[[Image:11_T02_window_property_view.png|center]]

{{Caption|align=center|Вид параметров окна для добавления значений по умолчанию для Frame length, Offset length и других опций}}

[[Image:12_T02_window_finished.png|600px|center]]

{{Caption|align=center|Итоговое окно с соответствующими компонентами, внедрёнными в стену}}

<span id="Duplicating_the_custom_window"></span>
== Размножение пользовательского окна ==

14. В древе проектов выделите {{incode|Window}} и нижележащий {{incode|Sketch002}}. Затем выполните {{MenuCommand|Edit → Duplicate selection}}, и при запросе ответьте {{Button|No}} для дублирования невыбранных зависимостей. Новые {{incode|Window001}} и {{incode|Sketch003}} появятся там же, где оригинальные элементы.

<div class="mw-translate-fuzzy">
15. Выделите новый {{incode|Sketch003}}. Перейдите к параметру {{PropertyData|Map Mode}} и кликните на эллипсе возле значения {{incode|FlatFace}}. В окне трёхмерного вида выделите левую сторону стены без каких-либо элементов; поверните [[standard view/ru|standard view]] куда надо. Измените {{incode|Attachment offset}} на [-1 m, 0 m, 0 m] для центрирования окна, и кликните  {{Button|OK}}. Эскиз и окно появятся на новой позиции.
:{{Emphasis|Примечание:}} [[Part EditAttachment|операция назначения]] так же может быть выполнена переключением на [[Part Workbench/ru|верстак Part]] и использованием меню {{MenuCommand|Part → Attachment}}.
</div>

[[Image:13_T02_sketch_attachment_edit.png|center]]

{{Caption|align=center|Диалог редактирования привязки плоскости эскиза}}

16. Вы можете настроить размеры нового окна изменением именованных параметров в {{incode|Sketch003}} в {{PropertyData|Constraints}}, например, установив {{incode|Height}} на {{incode|2 m}}, и {{incode|Frame Fixed Bottom}} на {{incode|0 m}}. Затем нажмите {{KEY|Ctrl}}+{{KEY|R}} для [[recompute/ru|пересчёта]] модели. Если окно не показывает увеличенного проёма под новое окно, выделите стену в древе проекта, кликните правой кнопкой и выберите  {{incode|Mark to recompute}}, затем снова нажмите {{KEY|Ctrl}}+{{KEY|R}}.

17. Эти операции меняют позиции нового окна, но проём в окне не выглядит правильно. Оно наклонено, то есть, проём не перпендикулярен поверхности стены, и может даже вырезать другие части стены. Проблема в том, что {{incode|Window001}} сохранила информацию о {{PropertyData|Normal}} из оригинального {{incode|Window}}.

[[Image:14_T02_sketch_2_attached_slanted.png|600px|center]]

{{Caption|align=center|Неправильный проём в стене из-за ошибочной нормали (Normal) окна}}

<span id="Normals_of_doors_and_windows"></span>
== Нормали дверей и окон ==

18. Каждый объект [[Arch Window/ru|Arch Window]] определяет выдавливание его тела, а так же отверстие, создаваемое в носящей его стене посредством {{PropertyData|Normal}}.

Нормаль - это вектор {{incode|[x, y, z]}}, указывающий направление, перпендикулярное стене. Если заготовка окна или двери создаётся инструментом [[Arch Window/ru|Arch Window]] прямо поверх [[Arch Wall/ru|стены]], нормаль вычисляется автоматически, корректно выставляя получившееся окно или дверь. Так были созданы первые два объекта, {{incode|Door}} и {{incode|Door001}}.

Таким же образом, когда эскиз создаётся выделением плоскости, он ориентирован по этой плоскости. Затем, когда используется инструмент [[Arch Window/ru|Arch Window]], окно использует как нормаль перпендикулярное направление к эскизу. Это было в случае с третьим объектом, пользовательским {{incode|Window}}.

Если окно уже есть и его нужно передвинуть, как в случае с дублированным объектом {{incode|Window001}}, эскиз требуется перепривязать к другой плоскости. Это сдвигает и эскиз и окно, но в дальнейшем его нормаль автоматически не обновляется, поскольку имеет некорректную информацию выдавливания. Нормаль нуждается в ручном пересчёте и записи в {{PropertyData|Normal}}.

Три значения вектора нормали высчитываются следующим образом.
{{Code|code=
x = -sin(angle)
y = cos(angle)
z = 0
}}
Где {{incode|angle}} - угол локальной оси Z эскиза относительно глобальной оси Y.

Когда создаётся эскиз, у него всегда две оси: локальная X (красная), и локальная Y (зелёная). Если эскиз привязан к глобальной рабочей плоскости XY, то эти оси выровнены, но если эскиз привязан к глобальным осям XZ или YZ, как это обычно бывает для окон и дверей (эскизы стоят вертикально), то локальная ось Z (голубая) составляет угол с глобальной осью Y, этот угол меняется от -180 до 180 градусов. Угол считается положительным, если он открывается против часовой стрелки, и отрицательный, если по часовой, начиная с глобальной оси Y.

[[Image:15_T02_sketch_local_coordinates.png|600px|center]]

{{Caption|align=center|Локальные координаты вертикально стоящего эскиза, то есть сопоставлен с глобальной плоскостью XZ}}

[[Image:16_T02_sketch_correct_normal_direction.png|600px|center]]

{{Caption|align=center|Намеченные направления нормалей для каждой двери и окна}}

Если мы посмотрим на до сих пор сделанную геометрию, мы увидим следующие нормали.

;{{incode|Door}}
: Локальное Z выравнено с глобальным Y, значит, {{incode|angle}} равен нулю. Нормальный вектор 
{{Code|code=
x = -sin(0) = 0
y = cos(0) = 1
z = 0
}}
или {{PropertyData|Normal}} соответствует {{incode|[0, 1, 0]}}.

;{{incode|Door001}}
: Локальное Z повёрнуто на 90 градусов относительно глобальной Y, значит, {{incode|angle}} равен 90 (положительно, поскольку открыт против часовой стрелки). Вектор нормали равен
{{Code|code=
x = -sin(90) = -1
y = cos(90) = 0
z = 0
}}
или {{PropertyData|Normal}} равен {{incode|[-1, 0, 0]}}.

;{{incode|Window}}
: Локальное Z повёрнуто на 45 градусов от глобальной Y, значит {{incode|angle}} равен 45 (положительный, поскольку открывается против часовой стрелки). Нормальный вектор равен
{{Code|code=
x = -sin(45) = -0.7071
y = cos(45) = 0.7071
z = 0
}}
или {{PropertyData|Normal}} равен {{incode|[-0.7071, 0.7071, 0]}}.

;{{incode|Window001}}
: Направление локального Z находится использованием инструмента [[Draft Dimension/ru|Draft Dimension]] и измерением угла, который направляющая стены ({{incode|Wire}}) составляет с глобальной осью Y, или любая линия, выровненная по ней. Этот угол равен {{incode|26.57}}; требуемый угол является дополнительным к этому, так что <code>90 - 26.57 = 63.43</code>.

Это означает, что локальная ось Z повёрнута на 63.43 градусов от глобальной Y, значит, {{incode|angle}} соответствует -63.46 (отрицательный, поскольку открывается по часовой стрелке). Вектор нормали 
{{Code|code=
x = -sin(-63.43) = 0.8943
y = cos(-63.43) = 0.4472
z = 0
}}
Значит, {{PropertyData|Normal}} должен быть установлен в {{incode|[0.8943, 0.4472, 0]}}.

После выполнения изменений пересчитайте модель нажатием {{KEY|Ctrl}}+{{KEY|R}}. Если стена не обновит отверстие, выделите его в древе проекта, и по клику правой кнопки мыши выделите {{incode|Mark to recompute}}, затем нажмите {{KEY|Ctrl}}+{{KEY|R}} вновь.

19. Ориентация выдавливания окна решена, вместе с отверстием в стене.

[[Image:17_T02_sketch_2_attached_correctly.png|600px|center]]

{{Caption|align=center|Корректный проём в стене в соответствии с нормалью окна}}

<span id="Final_remarks"></span>
== Конечные замечания ==

20. Как показано, [[Arch Window/ru|Arch Window]] очень важно. Пользователь должен либо
* Использовать инструмент [[Arch Window/ru|Arch Window]] для вставки автоматического выравнивания заготовки в стену, или
* привязать эскиз к желаемой стене и построить окно на нём.

Если окно уже существует, и его надо подвинуть, базовый эскиз должен быть перепривязан к новой плоскости, и {{PropertyData|Normal}} окна надо будет пересчитать.

Направление новой нормали может быть получено измерением {{incode|angle}} новой стены относительно оси Y, учитывая, является ли этот угол положительным (против часовой стрелки) или отрицательным (по часовой стрелке), и использованием простой формулы.
{{Code|code=
x = -sin(angle)
y = cos(angle)
z = 0
}}

Для проверки корректности операции, абсолютная величина вектора нормали должна быть равна единице. То есть:
{{Code|code=
abs(N) = 1 = sqrt(x^2 + y^2 + z^2)
abs(N) = 1 = sqrt(sin^2(angle) + cos^2(angle) + z^2)
}}


{{BIM_Tools_navi{{#translation:}}}}
{{Draft_Tools_navi{{#translation:}}}}
{{Sketcher_Tools_navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}