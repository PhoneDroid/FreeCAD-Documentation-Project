<languages/>

{{Docnav/fr
|[[Draft_WireToBSpline/fr|Polyligne <=> B-spline]]
|[[Draft_Slope/fr|Pente]]
|[[Draft_Workbench/fr|Atelier Draft]]
|IconL=Draft_WireToBSpline.svg
|IconR=Draft_Slope.svg
|IconC=Workbench_Draft.svg
}}

{{GuiCommand/fr
|Name=Draft Draft2Sketch
|Name/fr=Draft Draft <=> Esquisse
|MenuLocation=Draft/BIM : Modification → Convertir un objet Draft en esquisse et inversement
|Workbenches=[[Draft_Workbench/fr|Draft]], [[BIM_Workbench/fr|BIM]]
}}

==Description== 

La commande [[Image:Draft_Draft2Sketch.svg|24px]] '''Draft Draft <=> Esquisse''' convertit les objets [[Draft_Workbench/fr|Draft]] en [[Sketcher_NewSketch/fr|Sketcher Esquisses]] et inversement.

[[Image:Draft_Draft2Sketch_example.png]]
{{Caption|Conversion d'objets Draft en esquisses de Sketcher}}

<span id="Usage"></span>
==Utilisation== 

# Sélectionnez un ou plusieurs objets Draft ou des [[Sketcher_NewSketch/fr|Sketcher Esquisses]].
# Il existe plusieurs façons de lancer la commande :
#* Appuyez sur le bouton {{Button|[[Image:Draft_Draft2Sketch.svg|16px]] [[Draft_Draft2Sketch/fr|Convertir un objet Draft en esquisse et inversement]]}}.
#* [[Draft_Workbench/fr|Draft]] : sélectionnez l'option {{MenuCommand|Modification → [[Image:Draft_Draft2Sketch.svg|16px]] Convertir un objet Draft en esquisse et inversement}} du menu.
#* [[BIM_Workbench/fr|BIM]] : sélectionnez l'option {{MenuCommand|Modification → [[Image:Draft_Draft2Sketch.svg|16px]] Convertir un objet Draft en esquisse et inversement}} du menu.
# Si vous n'avez pas encore sélectionné d'objet : sélectionnez un objet dans la [[3D_view/fr|vue 3D]].
# Un nouvel objet est créé.

<span id="Notes"></span>
==Remarques==

* Les objets non Draft qui sont totalement planaires peuvent également être convertis.
* La commande ne peut traiter que les objets constitués de lignes droites, d'arcs circulaires, d'arcs elliptiques, de B-Splines et de courbes de Bézier.
* Les [[Draft_BezCurve/fr|Draft Courbes de Bézier]] seront approximées par des [[Sketcher_CreateBSpline/fr|Sketcher B-splines]].
* L'[[KicadStepUp_Workbench/fr|atelier KicadStepUp]] externe contient une commande permettant de convertir une [[Draft_BSpline/fr|Draft B-spline]] en une série de [[Sketcher_CreateArc/fr|Sketcher Arcs]]. Pour plus d'informations, voir la rubrique du forum [https://forum.freecadweb.org/viewtopic.php?f=9&t=25082 BSplines to Shape2DView and Sketcher].
* [https://forum.freecadweb.org/viewtopic.php?f=3&t=58781#p505207 Cet autre sujet du forum] contient une macro pour une telle conversion.

<span id="Scripting"></span>
==Script==

Voir aussi : [https://freecad.github.io/SourceDoc/ Autogenerated API documentation] et [[FreeCAD_Scripting_Basics/fr|FreeCAD Débuter avec les scripts]].

Pour convertir des objets en esquisses, utilisez la méthode {{incode|make_sketch}} ({{Version/fr|0.19}}) du module Draft. Cette méthode remplace la méthode dépréciée {{incode|makeSketch}}.

{{Code|code=
sketch = make_sketch(objects_list, autoconstraints=False, addTo=None, delete=False, name="Sketch", radiusPrecision=-1, tol=1e-3)
}}

* {{incode|objects_list}} contient les objets à convertir. Il s'agit soit d'un objet unique, soit d'une liste d'objets. Les objets {{incode|Draft}}, les objets {{incode|Part::Feature}} et les objets {{incode|Part.Shape}} sont pris en charge.
* Si {{incode|autoconstraints}} est {{incode|True}}, des contraintes coïncidentes sont ajoutées aux noeuds appartenant au même objet source.
* {{incode|addTo}} est l'objet esquisse existant auquel la géométrie est ajoutée. S'il n'est pas fourni, une nouvelle esquisse est créée.
* Si {{incode|delete}} est {{incode|True}}, les objets sources sont supprimés.
* {{incode|name}} est le nom de la nouvelle esquisse.
* {{incode|radiusPrecision}} indique comment les contraintes de rayon doivent être traitées :
** Utilisez {{incode|-1}} pour désactiver les contraintes de rayon.
** Utilisez {{incode|0}} pour ajouter des contraintes de rayon individuelles.
** Utilisez un nombre positif pour arrondir les rayons en fonction de cette précision et pour ajouter des contraintes égales entre les courbes de même rayon.
* {{incode|tol}} est la tolérance utilisée pour vérifier si les formes sont planes et co-planaires. Utilisez {{incode|-1}} pour une analyse stricte.
* {{incode|sketch}} est restitué avec l'objet esquisse.

Pour convertir une esquisse en objet Draft, utilisez la méthode {{incode|draftify}} du module Draft.

{{Code|code=
draftify(objectslist, makeblock=False, delete=True)
}}

* {{incode|objectslist}} contient les objets à convertir. Il s'agit soit d'un objet unique, soit d'une liste d'objets.
* Si {{incode|makeblock}} est {{incode|True}}, les objets convertis sont regroupés dans un {{incode|Part::Part2DObject}}.
* Si {{incode|delete}} est {{incode|True}}, les objets sources sont supprimés.

Exemple :

{{Code|code=
import FreeCAD as App
import Draft

doc = App.newDocument()

rectangle = Draft.make_rectangle(2000, 1000)
circle = Draft.make_circle(500)
doc.recompute()

sketch_from_draft = Draft.make_sketch([rectangle, circle], autoconstraints=True, delete=False, radiusPrecision=0)
doc.recompute()

draft_from_sketch = Draft.draftify(sketch_from_draft, delete=False)
doc.recompute()
}}


{{Docnav/fr
|[[Draft_WireToBSpline/fr|Polyligne <=> B-spline]]
|[[Draft_Slope/fr|Pente]]
|[[Draft_Workbench/fr|Atelier Draft]]
|IconL=Draft_WireToBSpline.svg
|IconR=Draft_Slope.svg
|IconC=Workbench_Draft.svg
}}

{{Draft Tools navi{{#translation:}}}}
{{Userdocnavi{{#translation:}}}}